<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SFRP Staff Application</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Segoe+UI&display=swap">
  <style>
    :root {
      --bg-light: #ffffff;
      --bg-dark: #0f172a;
      --text-light: #0f172a;
      --text-dark: #f1f5f9;
      --accent: #38bdf8;
      --card-bg: #1e293b;
      --border-radius: 12px;
      --gradient: linear-gradient(to right, #1e3a8a, #2563eb, #38bdf8);
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      transition: background 0.3s, color 0.3s;
      background: var(--bg-dark);
      color: var(--text-dark);
      padding: 1rem;
      background-image: var(--gradient);
      background-size: 400% 400%;
      animation: gradientMove 15s ease infinite;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .light-mode {
      background: var(--bg-light);
      color: var(--text-light);
      background-image: none;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: var(--card-bg);
      padding: 2rem;
      border-radius: var(--border-radius);
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    .light-mode .container {
      background: #f3f4f6;
    }
    h1, h2, h3 {
      text-align: center;
      margin-bottom: 1rem;
      color: var(--accent);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 500;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 8px;
      border: 1px solid #64748b;
      font-size: 1rem;
      box-sizing: border-box;
    }
    input:focus, textarea:focus, select:focus {
      outline: 2px solid var(--accent);
      background-color: #1e293b;
    }
    input, textarea, select {
      background: #334155;
      color: white;
    }
    .light-mode input,
    .light-mode textarea,
    .light-mode select {
      background: white;
      color: black;
      border: 1px solid #cbd5e1;
    }
    button {
      background: var(--accent);
      color: white;
      margin-top: 1.5rem;
      cursor: pointer;
    }
    button:hover {
      background: #0284c7;
    }
    #toggle-dark {
      position: fixed;
      top: 10px;
      right: 20px;
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      background: var(--accent);
      color: white;
      cursor: pointer;
      z-index: 1000;
    }
    img.logo {
      display: block;
      margin: 0 auto 1rem;
      height: 80px;
      border-radius: 50%;
    }
    .key-icon {
      position: fixed;
      top: 10px;
      right: 60px;
      background: #334155;
      border-radius: 50%;
      padding: 10px;
      cursor: pointer;
      font-size: 1.2rem;
      z-index: 1000;
    }
    #testModeContainer {
      display: none;
      position: fixed;
      top: 60px;
      right: 20px;
      background: #1e293b;
      padding: 1rem;
      border-radius: 8px;
      z-index: 1000;
    }
    .section {
      margin: 1.5rem 0;
    }
    .question {
      margin-top: 1rem;
    }
    .optional {
      font-style: italic;
      font-size: 0.9rem;
      color: #cbd5e1;
    }
  </style>
</head>
<body>
  <img class="logo" src="logo.png" alt="SFRP Logo" />
  <button id="toggle-dark">Toggle Dark Mode</button>
  <div class="key-icon" id="keyIcon">üîë</div>
  <div id="testModeContainer">
    <input type="password" id="testPassword" placeholder="Password..." />
    <button onclick="submitTestMode()">Submit Test</button>
  </div>

  <div class="container">
    <h1>SFRP Staff Application</h1>
    <form id="applicationForm">
      <label>1. Discord Username *</label>
      <input type="text" name="Discord Username" required />
      <label>2. Discord ID *</label>
      <input type="text" name="Discord ID" required />
      <label>3. Roblox Username *</label>
      <input type="text" name="Roblox Username" required />
      <label>4. Roblox ID *</label>
      <input type="text" name="Roblox ID" required />
      <label>5. State your Time Zone and Age *</label>
      <input type="text" name="Time Zone and Age" required />

<h2>Short Knowledge Questions</h2>
      <label>6. What does SFRP stand for? *</label>
      <input type="text" name="What does SFRP stand for" required />
      <label>7. Which of these is an ERLC command? (Select at least 2)</label>
      <select name="ERLC Commands" multiple required>
        <option value=":cmds">:cmds</option>
        <option value=":spawncar">:spawncar</option>
        <option value=":startfire">:startfire</option>
        <option value=":bring all-civillians">:bring all-civillians</option>
      </select>
      <label>8. Are you required to have a livery on as staff? *</label>
      <input type="text" name="Livery Requirement" required />

      <h2>About You</h2>
      <label>9. Name 3 of your best qualities *</label>
      <textarea name="Qualities" required></textarea>
      <label>10. Why do you want to join? *</label>
      <textarea name="Why Join" required></textarea>
      <label>11. Why should we pick you? *</label>
      <textarea name="Why Pick" required></textarea>
      <label>12. One weakness and how it affects the team *</label>
      <textarea name="Weakness" required></textarea>
      <label>13. What would you bring to the team? *</label>
      <textarea name="Bring to Team" required></textarea>

      <h2>Scenarios</h2>
      <label>14. Special event - only one person came *</label>
      <textarea name="Scenario 1" required></textarea>
      <label>15. Unofficial mafia causing havoc *</label>
      <textarea name="Scenario 2" required></textarea>
      <label>16. Someone pinged everyone, no HRs on *</label>
      <textarea name="Scenario 3" required></textarea>
      <label>17. Create your own high risk scenario *</label>
      <textarea name="Scenario 4" required></textarea>

      <h2>Rule Definitions</h2>
      <label>18. What is FRP? *</label>
      <textarea name="FRP" required></textarea>
      <label>19. What is NLR? *</label>
      <textarea name="NLR" required></textarea>
      <label>20. What is VDM & RDM? *</label>
      <textarea name="VDM RDM" required></textarea>
      <label>21. What is Gun Motion & Cuff Rush? *</label>
      <textarea name="Gun Motion Cuff Rush" required></textarea>
      <label>22. What is Tool Abuse? *</label>
      <textarea name="Tool Abuse" required></textarea>
      <label>23. What is Mod Call Spamming? *</label>
      <textarea name="Mod Call Spamming" required></textarea>
      <label>24. What is NSFW Content? *</label>
      <textarea name="NSFW" required></textarea>
      <label>25. What is Profanity? *</label>
      <textarea name="Profanity" required></textarea>

      <h2>Map Location Grid</h2>
      <p>Check the correct boxes for: City Gas Station, Housing Suburb, High Rock Entrance, Police Station.</p>
      <img src="map.png" alt="Map Grid" style="width:100%; max-width:600px;" />
      <div>
        A1 <input type="checkbox" name="Map A1" />
        B2 <input type="checkbox" name="Map B2" />
        C3 <input type="checkbox" name="Map C3" />
        D4 <input type="checkbox" name="Map D4" />
        E5 <input type="checkbox" name="Map E5" />
      </div>

      <h2>Final Confirmation</h2>
      <label>27. Do you understand all rules on and off duty? *</label>
      <input type="text" name="Rules Confirmation" required />
      <label>28. Your application can be denied, do you understand? *</label>
      <input type="text" name="Denial Confirmation" required />
      <label>29. Using AI will deny your application. Do you understand? *</label>
      <input type="text" name="AI Confirmation" required />
      <label>30. Sign with your Roblox Username *</label>
      <input type="text" name="Signature" required />
      <label>31. Anything to tell the reader? (Optional)</label>
      <textarea name="Final Message"></textarea>

      <button type="submit">Submit Application</button>
    </form>

    <div id="success-message" style="display:none; text-align:center; color:lime; margin-top:10px;">
      ‚úÖ Your application has been submitted successfully!
    </div>
  </div>

<script>
    const form = document.getElementById("applicationForm");
    const successMessage = document.getElementById("success-message");

    // TEST BUTTON
    const testBtn = document.getElementById("test-btn");
    const passwordPopup = document.getElementById("password-popup");
    const testPasswordInput = document.getElementById("test-password");

    testBtn.addEventListener("click", () => {
      passwordPopup.style.display = "block";
    });

    document.getElementById("test-submit").addEventListener("click", () => {
      const pw = testPasswordInput.value.trim();
      if (pw === "3434") {
        passwordPopup.style.display = "none";
        autofillTestAnswers();
      } else {
        alert("‚ùå Incorrect password.");
      }
    });

    function autofillTestAnswers() {
      const inputs = form.querySelectorAll("input[type=text], textarea");
      inputs.forEach((el) => {
        if (!el.name.toLowerCase().includes("id") && !el.name.toLowerCase().includes("username")) {
          el.value = "This is a test answer.";
        } else {
          el.value = "123456";
        }
      });

      // Select at least 2 options in select[multiple]
      const select = form.querySelector("select[multiple]");
      if (select) {
        select.options[0].selected = true;
        select.options[1].selected = true;
      }

      // Check some checkboxes
      const checkboxes = form.querySelectorAll("input[type=checkbox]");
      checkboxes.forEach((cb, i) => {
        if (i < 4) cb.checked = true;
      });
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = new FormData(form);
      const fields = [];

      data.forEach((value, key) => {
        fields.push({
          name: key,
          value: value.toString()
        });
      });

      const webhookURL = "https://discord.com/api/webhooks/1397667334197477406/eZ71Y9AGK1C7tVth-yMrtaeROiTQXBT8u8fFmc0xoGvb-QcaFjeAImTPh13_nK4eNu4A";

      const payload = {
        embeds: [{
          title: "üì• New Staff Application",
          color: 0x38bdf8,
          fields: fields.map(f => ({
            name: f.name,
            value: f.value.length > 1000 ? f.value.slice(0, 1000) + "..." : f.value,
            inline: false
          })),
          footer: {
            text: "South Florida RP",
            icon_url: "https://upload.wikimedia.org/wikipedia/commons/e/e1/Check_green_icon.svg"
          },
          timestamp: new Date().toISOString()
        }]
      };

      try {
        const res = await fetch(webhookURL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if (res.ok) {
          successMessage.style.display = "block";
          form.reset();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
          alert("‚ùå Failed to send. Check your internet or try again later.");
        }
      } catch (err) {
        alert("‚ùå Submission error.");
        console.error(err);
      }
    });
  </script>
</body>
</html>
